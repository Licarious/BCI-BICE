technologies = {

	@VERT_0 = 0
	@VERT_1 = 2
	@VERT_2 = 5
	@VERT_3 = 7
	@VERT_4 = 9
	@VERT_5 = 11
	@VERT_6 = 13
	@VERT_6h = 14
	@VERT_7 = 15
	@VERT_7h = 16
	@VERT_8 = 17
	@VERT_8h = 18
	@VERT_9 = 19
	@VERT_9h = 20
	@VERT_10 = 21
	@VERT_10h = 22
	@VERT_11 = 23
	@VERT_11h = 24
	@VERT_12 = 25
	@VERT_12h = 26
	
	@START = 10
	@SPLIT1 = 7
	@SPLIT2 = 13
	@SPLIT3 = 30
	@BB_TREE = 5
	@CA_TREE = 10
	@CA_TREE_L1 = 9
	@CA_TREE_R1 = 11
	@DD_TREE = 22
	@DD_TREE_L1 = 21
	@DD_TREE_R1 = 23
	@SS_TREE = 30
	@SS_TREE_L1 = 29
	@SS_TREE_R1 = 31
	@CV_TREE = -2
	@CV_TREE_L2 = -4
	@CV_TREE_L1 = -3
	@CV_TREE_R1 = -1
	@CV_TREE_R2 = 0
	@CV_TREE_L3 = -5
	@MINE_TREE = 15
	@CONVOY_TREE = 26
	@FLEETTRAIN_TREE = 3
	@DECBAT_TREE = 7
	@DECBAT_TREE_L1 = 6
	@DECBAT_TREE_R1 = 8
	@FIB_TREE = 12
	@FIB_TREE_L1 = 11
	@FIB_TREE_R1 = 13
	@TI_TREE = 17
	
	@BASE_PRIORITY = 250
	@CAPITAL_PRIORITY = 200
	@CRUISER_PRIORITY = 150
	@CARRIER_PRIORITY = 250
	@MINE_PRIORITY = 25
	@DESTROYER_PRIORITY = 200
	@CONVOY_PRIORITY = 200
	@SUBMARINE_PRIORITY = 250
	@FLEET_LOGISTICS_PRIORITY = 150
	@DECISIVE_BATTLE_PRIORITY = 250
	@FLEET_IN_BEING_PRIORITY = 250
	@TRADE_INTERDICTION_PRIORITY = 250

	nrm_pre_ww1_naval_doctrine = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 2
			#default_morale = -0.05
		}
		category_all_cruiser = {
			max_organisation = 2
			#default_morale = -0.05
		}
		category_all_destroyer = {
			max_organisation = 2
			#default_morale = -0.05
		}
		category_all_carrier = {
			#default_morale = -0.05
			carrier_size = -0.15
		}
		category_all_subs = {
			#default_morale = -0.05
			sub_visibility = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 1.4
			#default_morale = -0.05
			carrier_size = -0.045
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
			#default_morale = -0.05
			carrier_size = -0.045
		}
		category_all_submarine_carrier = {
			#default_morale = -0.05
			carrier_size = -0.03
			sub_visibility = 0.04
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
			#default_morale = -0.05
			sub_visibility = 0.04
		}
		
		naval_torpedo_screen_penetration_factor = 0.01
		navy_capital_ship_defence_factor = -0.05
		navy_screen_defence_factor = -0.05
		navy_carrier_air_agility_factor = -0.25
		navy_carrier_air_targetting_factor = -0.25
		navy_carrier_air_attack_factor = -0.25
		#####
		xp_research_type = navy
		xp_boost_cost = 15
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_mahanian_concepts 
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_jeune_ecole_concepts 
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1890
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_pre_ww1_naval_doctrine }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @START y = @VERT_0 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @BASE_PRIORITY 
				
				ai_base_naval_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0		
		}

	}
	
	#WW1 Capital/Cruiser Branch Precursor
	nrm_mahanian_concepts = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 2
		}
		category_all_cruiser = {
			max_organisation = 1
		}
		category_all_battle_carrier = {
			max_organisation = 1.4
		}
		category_all_cruiser_carrier = {
			max_organisation = 0.7
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.2
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 15
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_battlefleet_concentration 
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_cruiser_warfare
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1900
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_mahanian_concepts }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @SPLIT1 y = @VERT_1 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @BASE_PRIORITY 
				
				ai_base_naval_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_ww1 = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	
	#WW1 Cruiser/Destroyer/Submarine Branch Precursor
	nrm_jeune_ecole_concepts = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 1
		}
		category_all_cruiser_carrier = {
			max_organisation = 0.7
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.2
		}
		category_all_destroyer = {
			max_organisation = 2
		}
		
		navy_screen_attack_factor = 0.02
		navy_screen_defence_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		spotting_chance = 0.01
		convoy_raiding_efficiency_factor = 0.02
		naval_retreat_speed = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 15
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_cruiser_warfare
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_destroyer_support
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_mine_warfare
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_commerce_warfare
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1900
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_jeune_ecole_concepts }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SPLIT2 y = @VERT_1 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @BASE_PRIORITY 
				
				ai_base_naval_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_ww1 = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	
	#WW1 Submarine Branch Precursor
	nrm_commerce_warfare = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			surface_visibility = -0.01
			convoy_raiding_coordination = 0.05
		}
		category_all_cruiser_carrier = {
			surface_visibility = -0.007
			convoy_raiding_coordination = 0.035
		}
		category_all_cruiser_submarine = {
			surface_visibility = -0.002
			convoy_raiding_coordination = 0.01
		}
		
		spotting_chance = 0.01
		convoy_raiding_efficiency_factor = 0.03
		naval_retreat_speed = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 10
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_submarine_tactics_early
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1900
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_cruiser
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_commerce_warfare }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SPLIT3 y = @VERT_1 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_cruiser = 1.0
			naval_doctrine_submarine = 1.0		
		}

	}
	
	#WW1 Capital Branch
	nrm_battlefleet_concentration = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 3
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 2.1
			#default_morale = 0.007
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.02
		naval_hit_chance = 0.01
		positioning = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 10
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_scouting_force
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1905
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_capital
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_battlefleet_concentration }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @BB_TREE y = @VERT_2 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CAPITAL_PRIORITY }
				ai_capital_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_capital = 1.0		
		}

	}
	nrm_scouting_force = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			surface_detection = 0.1
		}
		category_all_battle_carrier = {
			surface_detection = 0.07
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.01
		spotting_chance = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 20
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_fleet_formation
			research_cost_coeff = 1
		}
		
		path = {
			leads_to_tech = nrm_naval_aviation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1910
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_capital
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_scouting_force }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @BB_TREE y = @VERT_3 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CAPITAL_PRIORITY }
				ai_capital_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_capital = 1.0		
		}

	}
	nrm_fleet_formation = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 4
			surface_visibility = -0.01
		}
		category_all_battle_carrier = {
			max_organisation = 2.8
			surface_visibility = -0.007
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.02
		naval_hit_chance = 0.01
		positioning = 0.01
		naval_retreat_speed = 0.02
		screening_efficiency = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 30
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_fleet_coordination
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.5
		start_year = 1915
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_capital
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fleet_formation }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @BB_TREE y = @VERT_4 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CAPITAL_PRIORITY }
				ai_capital_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.5
			naval_doctrine_ww1 = 1.5
			naval_doctrine_capital = 1.5		
		}

	}
	nrm_fleet_coordination = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 6
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 4.2
			#default_morale = 0.007
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.01
		naval_hit_chance = 0.01
		positioning = 0.02
		screening_efficiency = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.75
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_capital
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fleet_coordination }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @BB_TREE y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CAPITAL_PRIORITY }
				ai_capital_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_capital = 2.0		
		}

	}
	
	#WW1 Cruiser Branch
	nrm_cruiser_warfare = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 2
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.01
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.01
		naval_hit_chance = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 10
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_cruiser_battleline_support
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_cruiser_flotilla_leader
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1905
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_cruiser_warfare }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CA_TREE y = @VERT_2 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CRUISER_PRIORITY }
				ai_cruiser_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_cruiser = 1.0		
		}

	}
	nrm_cruiser_battleline_support = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 3
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
		}
		
		navy_capital_ship_attack_factor = 0.015
		navy_capital_ship_defence_factor = 0.015
		naval_hit_chance = 0.01
		positioning = 0.005
		screening_efficiency = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 20
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_independent_cruiser_operation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1910
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_cruiser_battleline_support }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CA_TREE_L1 y = @VERT_3 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CRUISER_PRIORITY }
				ai_cruiser_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_cruiser = 1.0		
		}

	}
	nrm_cruiser_flotilla_leader = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 1
			surface_detection = 0.05
		}
		category_all_cruiser_carrier = {
			max_organisation = 0.7
			surface_detection = 0.035
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.2
			surface_detection = 0.01
		}
		category_all_destroyer = {
			surface_detection = 0.1
		}
		
		navy_screen_attack_factor = 0.015
		navy_screen_defence_factor = 0.015
		positioning = 0.005
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 20
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_independent_cruiser_operation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1910
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_cruiser_flotilla_leader }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CA_TREE_R1 y = @VERT_3 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CRUISER_PRIORITY }
				ai_cruiser_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_cruiser = 1.0		
		}

	}
	nrm_independent_cruiser_operation = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 2
			surface_detection = 0.05
			convoy_raiding_coordination = 0.1
			#default_morale = 0.01
			surface_visibility = -0.01
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
			surface_detection = 0.035
			convoy_raiding_coordination = 0.07
			#default_morale = 0.007
			surface_visibility = -0.007
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
			surface_detection = 0.01
			convoy_raiding_coordination = 0.02
			#default_morale = 0.002
			surface_visibility = -0.002
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.01
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.01
		convoy_escort_efficiency = 0.01
		convoy_raiding_efficiency_factor = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 30
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_cruiser_patrols
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.5
		start_year = 1915
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_independent_cruiser_operation }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CA_TREE y = @VERT_4 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CRUISER_PRIORITY }
				ai_cruiser_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.5
			naval_doctrine_ww1 = 1.5
			naval_doctrine_cruiser = 1.5		
		}

	}
	nrm_cruiser_patrols = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 2
			surface_detection = 0.05
			#default_morale = 0.01
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
			surface_detection = 0.035
			#default_morale = 0.007
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
			surface_detection = 0.01
			#default_morale = 0.002
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.01
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.01
		spotting_chance = 0.02
		convoy_escort_efficiency = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.75
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_cruiser_patrols }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CA_TREE y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CRUISER_PRIORITY }
				ai_cruiser_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	
	#WW1 Destroyer Branch
	nrm_destroyer_support = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 3
			torpedo_attack = 0.03
		}
		
		navy_screen_attack_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		convoy_escort_efficiency = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 10
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_destroyer_screen
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1905
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_support }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_2 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_destroyer = 1.0		
		}

	}
	nrm_destroyer_screen = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 2
			torpedo_attack = 0.02
			#default_morale = 0.01
			surface_detection = 0.05
		}
		category_all_escort = {
			max_organisation = 3
			surface_detection = 0.05
		}
		
		night_spotting_chance = 0.02
		naval_night_attack = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.03
		convoy_escort_efficiency = 0.02
		naval_retreat_speed = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 20
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_destroyer_torpedo_tactics
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_trade_protection
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1910
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_screen }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_3 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_destroyer = 1.0		
		}

	}
	nrm_destroyer_torpedo_tactics = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 3
			torpedo_attack = 0.05
		}
		
		navy_screen_attack_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.02
		naval_torpedo_hit_chance_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 30
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_independent_destroyer_operation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.5
		start_year = 1915
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_torpedo_tactics }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_4 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.5
			naval_doctrine_destroyer = 1.5		
		}

	}
	nrm_independent_destroyer_operation = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 2
			#default_morale = 0.01
			surface_detection = 0.1
			sub_detection = 0.1
			surface_visibility = -0.02
		}
		category_all_escort = {
			max_organisation = 2
			surface_detection = 0.1
			sub_detection = 0.1
			surface_visibility = -0.02
		}
		
		navy_screen_attack_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.02
		convoy_escort_efficiency = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.75
		
		path = {
			leads_to_tech = nrm_destroyer_fleet_operations
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_destroyer_patrol_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_independent_destroyer_operation }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	
	#Destroyer Branch
	nrm_destroyer_fleet_operations = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_destroyer_patrol_operations }
		}
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 4
			torpedo_attack = 0.02
			surface_detection = 0.05
		}
		
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.02
		navy_anti_air_attack_factor = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		xor = { nrm_destroyer_patrol_operations }
		
		path = {
			leads_to_tech = nrm_destroyer_screen_improved
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1930
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_fleet_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE_L1 y = @VERT_6 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_nrm_destroyer_fleet_operations_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_patrol_operations = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_destroyer_fleet_operations }
		} 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 2
			sub_detection = 0.1
			sub_attack = 0.05
		}
		category_all_escort = {
			max_organisation = 2
			sub_detection = 0.1
			sub_attack = 0.05
		}
		
		convoy_escort_efficiency = 0.05
		spotting_chance = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		xor = { nrm_destroyer_fleet_operations }
		
		path = {
			leads_to_tech = nrm_destroyer_screen_improved
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1930
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_patrol_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE_R1 y = @VERT_6 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_nrm_destroyer_patrol_operations_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_screen_improved = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 3
			torpedo_attack = 0.02
			#default_morale = 0.01
		}
		category_all_escort = {
			max_organisation = 3
			#default_morale = 0.01
		}
		
		night_spotting_chance = 0.02
		naval_night_attack = 0.02
		navy_screen_attack_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.03
		naval_retreat_speed = 0.02
		positioning = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_destroyer_asw_tactics
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1936
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_screen_improved }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_7 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_asw_tactics = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 3
			sub_detection = 0.1
			sub_attack = 0.05
		}
		category_all_escort = {
			max_organisation = 3
			sub_detection = 0.1
			sub_attack = 0.05
		}
		
		convoy_escort_efficiency = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_destroyer_torpedo_advanced
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1938
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_asw_tactics }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_8 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_torpedo_advanced = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 3
			torpedo_attack = 0.05
		}
		
		navy_screen_attack_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.02
		naval_torpedo_hit_chance_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_destroyer_aa_escort
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_destroyer_hunter_killer
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1940
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_torpedo_advanced }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_9 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_aa_escort = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 3
			anti_air_attack = 0.1
		}
		
		navy_screen_attack_factor = 0.01
		navy_anti_air_attack_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_destroyer_advanced_tactics
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_aa_escort }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE_L1 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_hunter_killer = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 2
			sub_detection = 0.15
			sub_attack = 0.1
		}
		category_all_escort = {
			max_organisation = 2
			sub_detection = 0.15
			sub_attack = 0.1
		}
		
		convoy_escort_efficiency = 0.10
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_destroyer_advanced_tactics
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_hunter_killer }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE_R1 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_destroyer_advanced_tactics = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_destroyer = {
			max_organisation = 5
			#default_morale = 0.01
			torpedo_attack = 0.05
			anti_air_attack = 0.02
			sub_detection = 0.05
			surface_detection = 0.05
			surface_visibility = -0.01
		}
		category_all_escort = {
			max_organisation = 5
			anti_air_attack = 0.02
			sub_detection = 0.05
			surface_detection = 0.05
			surface_visibility = -0.01
		}
		
		night_spotting_chance = 0.02
		naval_night_attack = 0.02
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.02
		convoy_escort_efficiency = 0.02
		naval_retreat_speed = 0.02
		positioning = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_destroyer_advanced_tactics
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1944
		
		categories = {
			naval_doctrine
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_destroyer_advanced_tactics }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DD_TREE y = @VERT_11 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DESTROYER_PRIORITY }
				ai_destroyer_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	
	#Convoy Branch
	nrm_trade_protection = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		convoy_escort_efficiency = 0.10
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_escort_patrols
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.5
		start_year = 1910
		
		categories = {
			naval_doctrine
			naval_doctrine_convoy
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_trade_protection }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_convoy_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CONVOY_TREE y = @VERT_3 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CONVOY_PRIORITY }
				ai_convoy_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.5
			naval_doctrine_convoy = 1.5		
		}

	}
	nrm_escort_patrols = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			sub_detection = 0.02
			sub_attack = 0.02
		}
		category_all_cruiser_carrier = {
			sub_detection = 0.014
			sub_attack = 0.014
		}
		category_all_cruiser_submarine = {
			sub_detection = 0.004
			sub_attack = 0.004
		}
		category_all_destroyer = {
			sub_detection = 0.02
			sub_attack = 0.02
		}
		category_all_escort = {
			sub_detection = 0.02
			sub_attack = 0.02
		}
		convoy_escort_efficiency = 0.15
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_convoy_sailing
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_convoy
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_escort_patrols }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_convoy_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CONVOY_TREE y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CONVOY_PRIORITY }
				ai_convoy_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_convoy = 2.5		
		}

	}
	nrm_convoy_sailing = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			sub_detection = 0.03
			sub_attack = 0.03
		}
		category_all_cruiser_carrier = {
			sub_detection = 0.021
			sub_attack = 0.021
		}
		category_all_cruiser_submarine = {
			sub_detection = 0.006
			sub_attack = 0.006
		}
		category_all_destroyer = {
			sub_detection = 0.03
			sub_attack = 0.03
		}
		category_all_escort = {
			sub_detection = 0.03
			sub_attack = 0.03
		}
		convoy_escort_efficiency = 0.15
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_convoy
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1936
		
		dependencies = {
			nrm_destroyer_screen_improved = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_convoy
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_convoy_sailing }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_convoy_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CONVOY_TREE y = @VERT_7 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CONVOY_PRIORITY }
				ai_convoy_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_convoy = 2.5		
		}

	}
	nrm_carrier_convoy = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			sub_detection = 0.1
		}
		category_all_battle_carrier = {
			sub_detection = 0.03
		}
		category_all_cruiser_carrier = {
			sub_detection = 0.03
		}
		category_all_submarine_carrier = {
			sub_detection = 0.02
		}

		convoy_escort_efficiency = 0.20
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_integrated_convoy_defence
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1940
		
		dependencies = {
			nrm_carrier_development = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_convoy
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_convoy }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_convoy_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CONVOY_TREE y = @VERT_9 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CONVOY_PRIORITY }
				ai_convoy_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_convoy = 2.5		
		}

	}
	nrm_integrated_convoy_defence = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			sub_detection = 0.05
		}
		category_all_cruiser = {
			sub_detection = 0.05
			sub_attack = 0.05
		}
		category_all_battle_carrier = {
			sub_detection = 0.015
		}
		category_all_cruiser_carrier = {
			sub_detection = 0.05
			sub_attack = 0.035
		}
		category_all_submarine_carrier = {
			sub_detection = 0.01
		}
		category_all_cruiser_submarine = {
			sub_detection = 0.01
			sub_attack = 0.01
		}
		category_all_destroyer = {
			sub_detection = 0.05
			sub_attack = 0.05
		}
		category_all_escort = {
			sub_detection = 0.05
			sub_attack = 0.05
		}
		convoy_escort_efficiency = 0.20
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1944
		
		categories = {
			naval_doctrine
			naval_doctrine_convoy
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_integrated_convoy_defence }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_convoy_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CONVOY_TREE y = @VERT_11 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CONVOY_PRIORITY }
				ai_convoy_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_convoy = 2.5		
		}

	}
	
	#WW1 Submarine Branch
	nrm_submarine_tactics_early = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			torpedo_attack = 0.03
			sub_visibility = -0.01
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			torpedo_attack = 0.024
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			torpedo_attack = 0.024
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		
		sub_retreat_speed = 0.03
		naval_torpedo_reveal_chance_factor = -0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 10
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_submarine_raiding
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1905
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_tactics_early }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE y = @VERT_2 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_submarine = 1.0		
		}

	}
	nrm_submarine_raiding = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			torpedo_attack = 0.02
			surface_detection = 0.05
			convoy_raiding_coordination = 0.05
			sub_visibility = -0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			torpedo_attack = 0.016
			surface_detection = 0.04
			convoy_raiding_coordination = 0.04
			sub_visibility = -0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			torpedo_attack = 0.016
			surface_detection = 0.04
			convoy_raiding_coordination = 0.04
			sub_visibility = -0.008
		}
		
		sub_retreat_speed = 0.02
		naval_torpedo_reveal_chance_factor = -0.01
		navy_submarine_attack_factor = 0.01
		navy_submarine_defence_factor = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 20
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_submarine_torpedo_tactics
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1910
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_raiding }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE y = @VERT_3 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_submarine = 1.0		
		}

	}
	nrm_submarine_torpedo_tactics = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			torpedo_attack = 0.05
			sub_visibility = -0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			torpedo_attack = 0.04
			sub_visibility = -0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			torpedo_attack = 0.04
			sub_visibility = -0.008
		}
		
		sub_retreat_speed = 0.02
		naval_torpedo_reveal_chance_factor = -0.01
		naval_torpedo_screen_penetration_factor = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 30
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_submarine_offensive_operations
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_submarine_fleet_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.5
		start_year = 1915
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_torpedo_tactics }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE y = @VERT_4 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.5
			naval_doctrine_ww1 = 1.5
			naval_doctrine_submarine = 1.5		
		}

	}
	
	#Submarine Branch
	nrm_submarine_offensive_operations = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_submarine_fleet_operations }
		} 
		
		# EFFECT #############
		category_all_subs = {
			torpedo_attack = 0.05
		}
		category_all_submarine_carrier = {
			torpedo_attack = 0.04
		}
		category_all_cruiser_submarine = {
			torpedo_attack = 0.04
		}
		
		sub_retreat_speed = 0.02
		naval_torpedo_reveal_chance_factor = -0.01
		navy_submarine_attack_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.75
		
		xor = { nrm_submarine_fleet_operations }
		
		path = {
			leads_to_tech = nrm_submarine_raiding_improved
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_offensive_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_L1 y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_submarine_offensive_operations_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_fleet_operations = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_submarine_offensive_operations }
		} 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			surface_detection = 0.05
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			surface_detection = 0.04
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			surface_detection = 0.04
		}
		
		sub_retreat_speed = 0.02
		spotting_chance = 0.01
		naval_torpedo_reveal_chance_factor = -0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.75
		
		xor = { nrm_submarine_offensive_operations }
		
		path = {
			leads_to_tech = nrm_submarine_scouting
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_fleet_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_R1 y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_nrm_submarine_fleet_operations_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_raiding_improved = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			convoy_raiding_coordination = 0.05
			surface_detection = 0.05
			sub_visibility = -0.01
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			convoy_raiding_coordination = 0.04
			surface_detection = 0.04
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			convoy_raiding_coordination = 0.04
			surface_detection = 0.04
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		
		sub_retreat_speed = 0.02
		naval_torpedo_reveal_chance_factor = -0.01
		convoy_raiding_efficiency_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_submarine_tactics_improved
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1930
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_raiding_improved }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_L1 y = @VERT_6 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_scouting = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			surface_detection = 0.05
			sub_visibility = -0.01
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			surface_detection = 0.04
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			surface_detection = 0.04
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		
		sub_retreat_speed = 0.02
		spotting_chance = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_submarine_tactics_improved
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1930
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_scouting }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_R1 y = @VERT_6 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_tactics_improved = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			surface_detection = 0.05
			convoy_raiding_coordination = 0.05
			sub_visibility = -0.01
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			surface_detection = 0.04
			convoy_raiding_coordination = 0.04
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			surface_detection = 0.04
			convoy_raiding_coordination = 0.04
			sub_visibility = -0.008
			#default_morale = 0.008
		}
		
		sub_retreat_speed = 0.02
		navy_submarine_attack_factor = 0.02
		navy_submarine_defence_factor = 0.02
		naval_torpedo_reveal_chance_factor = -0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_submarine_torpedo_improved
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_submarine_unrestricted
			research_cost_coeff = 1
		}
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1936
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_tactics_improved }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE y = @VERT_7 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_torpedo_improved = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			torpedo_attack = 0.05
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			torpedo_attack = 0.04
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			torpedo_attack = 0.04
		}
		
		sub_retreat_speed = 0.02
		navy_submarine_attack_factor = 0.02
		naval_torpedo_reveal_chance_factor = -0.02
		naval_torpedo_screen_penetration_factor = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_submarine_long_range
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_submarine_evasion
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1938
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_torpedo_improved }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_R1 y = @VERT_8 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_unrestricted = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			torpedo_attack = 0.05
			surface_detection = 0.1
			convoy_raiding_coordination = 0.1
		}
		category_all_submarine_carrier = {
			torpedo_attack = 0.04
			surface_detection = 0.08
			convoy_raiding_coordination = 0.08
		}
		category_all_cruiser_submarine = {
			torpedo_attack = 0.04
			surface_detection = 0.08
			convoy_raiding_coordination = 0.08
		}
		
		sub_retreat_speed = 0.01
		navy_submarine_attack_factor = 0.01
		navy_submarine_defence_factor = 0.01
		naval_torpedo_reveal_chance_factor = -0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_submarine_wolfpack
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1938
		
		dependencies = {
			nrm_trade_interdiction = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_unrestricted }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_L1 y = @VERT_8 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_long_range = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			naval_range = 0.1
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			naval_range = 0.08
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			naval_range = 0.08
			#default_morale = 0.008
		}
		
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_long_range }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_R1 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_submarine = 1.0		
		}

	}
	nrm_submarine_evasion = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 1
			sub_visibility = -0.02
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 0.8
			sub_visibility = -0.016
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			sub_visibility = -0.016
			#default_morale = 0.008
		}
		
		sub_retreat_speed = 0.02
		navy_submarine_defence_factor = 0.02
		naval_torpedo_reveal_chance_factor = -0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_submarine_tactics_advanced
			research_cost_coeff = 1
		}
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1940
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_evasion }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE y = @VERT_9 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_wolfpack = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 2
			surface_detection = 0.1
			convoy_raiding_coordination = 0.3
		}
		category_all_submarine_carrier = {
			max_organisation = 1.6
			surface_detection = 0.08
			convoy_raiding_coordination = 0.24
		}
		category_all_cruiser_submarine = {
			max_organisation = 1.6
			surface_detection = 0.08
			convoy_raiding_coordination = 0.24
		}
		
		sub_retreat_speed = 0.02
		navy_submarine_attack_factor = 0.02
		navy_submarine_defence_factor = 0.02
		naval_torpedo_reveal_chance_factor = -0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_wolfpack }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE_L1 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_submarine_tactics_advanced = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_subs = {
			max_organisation = 2
			torpedo_attack = 0.05
			surface_detection = 0.05
			sub_visibility = -0.02
			convoy_raiding_coordination = 0.1
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			max_organisation = 1.6
			torpedo_attack = 0.04
			surface_detection = 0.04
			sub_visibility = -0.016
			convoy_raiding_coordination = 0.08
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 1.6
			torpedo_attack = 0.04
			surface_detection = 0.04
			sub_visibility = -0.016
			convoy_raiding_coordination = 0.08
			#default_morale = 0.008
		}
		
		sub_retreat_speed = 0.03
		navy_submarine_attack_factor = 0.02
		navy_submarine_defence_factor = 0.02
		naval_torpedo_reveal_chance_factor = -0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1944
		
		categories = {
			naval_doctrine
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_submarine_tactics_advanced }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @SS_TREE y = @VERT_11 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @SUBMARINE_PRIORITY }
				ai_submarine_doctrine_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	
	#Decisive Battle Branch
	nrm_decisive_battle = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_fleet_in_being }
			NOT = { has_tech = nrm_trade_interdiction }
		} 
		max_navy_experience = 50
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			surface_detection = 0.05
		}
		category_all_cruiser = {
			max_organisation = 5
			surface_detection = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
		}
		category_all_cruiser_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
		}
		category_all_cruiser_submarine = {
			max_organisation = 1
			surface_detection = 0.01
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = -0.01
		navy_screen_attack_factor = 0.02
		navy_screen_defence_factor = -0.01
		naval_hit_chance = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		positioning = 0.01
		naval_retreat_chance = -0.02
		convoy_escort_efficiency = -0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		xor = { nrm_fleet_in_being nrm_trade_interdiction }
		
		path = {
			leads_to_tech = nrm_db_offensive_tactics
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1935
		
		dependencies = {
			nrm_fleet_coordination = 1
			nrm_independent_cruiser_operation = 1
			nrm_cruiser_flotilla_leader = 1
			nrm_destroyer_torpedo_tactics = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_decisive_battle }
			is_tech_ai_valid = yes
		
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE y = @VERT_6h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_decisive_battle_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_db_offensive_tactics = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 3
		}
		category_all_cruiser = {
			max_organisation = 3
		}
		category_all_battle_carrier = {
			max_organisation = 2.1
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
		}
		category_all_destroyer = {
			max_organisation = 2
			torpedo_attack = 0.05
		}
		
		navy_capital_ship_attack_factor = 0.03
		navy_screen_attack_factor = 0.03
		naval_hit_chance = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		naval_retreat_chance = -0.01
		screening_efficiency = -0.01
		convoy_escort_efficiency = -0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_db_battleline_tactics
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_db_cruiser_torpedo
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1937
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_offensive_tactics }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE y = @VERT_7h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_db_battleline_tactics = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			#default_morale = 0.01
		}
		category_all_cruiser = {
			max_organisation = 2
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			#default_morale = 0.007
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.02
		naval_hit_chance = 0.01
		screening_efficiency = 0.01
		positioning = 0.01
		naval_retreat_chance = -0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_db_combined_carrier
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1939
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_battleline_tactics }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE_L1 y = @VERT_8h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_db_cruiser_torpedo = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 3
			torpedo_attack = 0.1
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
			torpedo_attack = 0.07
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
			torpedo_attack = 0.02
		}
		category_all_destroyer = {
			max_organisation = 2
			torpedo_attack = 0.05
		}
		
		naval_night_attack = 0.05
		navy_screen_attack_factor = 0.02
		navy_screen_defence_factor = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_db_heavy_scouting
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1939
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_cruiser_torpedo }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE_R1 y = @VERT_8h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_db_combined_carrier = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 3
			#default_morale = 0.01
		}
		category_all_battleship = {
			max_organisation = 2
		}
		category_all_cruiser = {
			max_organisation = 2
		}
		category_all_battle_carrier = {
			max_organisation = 2.3
			#default_morale = 0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.3
			#default_morale = 0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 0.6
			#default_morale = 0.002
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
		}
		
		sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.1
		#port_strike = 0.15
		positioning = 0.01
		screening_efficiency = 0.02
		navy_anti_air_attack_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_db_forward_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1941
		
		dependencies = {
			nrm_carrier_development = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_carrier
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_combined_carrier }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE_L1 y = @VERT_9h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_carrier = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_db_heavy_scouting = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			surface_detection = 0.1
			surface_visibility = -0.01
		}
		category_all_cruiser = {
			max_organisation = 3
			surface_detection = 0.05
			#default_morale = 0.01
			surface_visibility = -0.01
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			surface_detection = 0.07
			surface_visibility = -0.007
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
			surface_detection = 0.035
			#default_morale = 0.007
			surface_visibility = -0.007
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
			surface_detection = 0.01
			#default_morale = 0.002
			surface_visibility = -0.002
		}
		category_all_destroyer = {
			max_organisation = 1
			surface_detection = 0.05
			#default_morale = 0.01
			surface_visibility = -0.01
		}
		
		naval_night_attack = 0.05
		spotting_chance = 0.02
		positioning = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_db_forward_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1941
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_heavy_scouting }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE_R1 y = @VERT_9h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_db_forward_operations = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			naval_range = 0.05
			max_organisation = 2
			surface_detection = 0.05
			#default_morale = 0.01
		}
		
		naval_coordination = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_db_grand_battlefleet
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1943
		
		dependencies = {
			nrm_db_combined_carrier = 1
			nrm_db_heavy_scouting = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_forward_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE y = @VERT_10h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_db_grand_battlefleet = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 3
		}
		category_all_cruiser = {
			max_organisation = 3
		}
		category_all_battle_carrier = {
			max_organisation = 2.1
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
		}
		category_all_destroyer = {
			max_organisation = 3
		}
		
		navy_capital_ship_attack_factor = 0.03
		navy_capital_ship_defence_factor = 0.02
		navy_screen_attack_factor = 0.03
		navy_screen_defence_factor = 0.02
		naval_hit_chance = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		positioning = 0.01
		naval_retreat_chance = -0.01
		navy_anti_air_attack_factor = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1945
		
		categories = {
			naval_doctrine
			naval_doctrine_decisive_battle
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_db_grand_battlefleet }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_decisive_battle_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @DECBAT_TREE y = @VERT_11h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @DECISIVE_BATTLE_PRIORITY }
				ai_decisive_battle_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_decisive_battle = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	
	#Fleet in Being Branch
	nrm_fleet_in_being = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_decisive_battle }
			NOT = { has_tech = nrm_trade_interdiction }
		} 
		
		max_navy_experience = 50
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 4
		}
		category_all_cruiser = {
			max_organisation = 4
		}
		category_all_battle_carrier = {
			max_organisation = 2.8
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.8
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
		}
		category_all_destroyer = {
			max_organisation = 4
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.02
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.02
		naval_hit_chance = 0.01
		positioning = 0.01
		naval_retreat_speed = 0.01
		screening_efficiency = 0.02
		convoy_escort_efficiency = 0.02
		repair_speed_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		xor = { nrm_decisive_battle nrm_trade_interdiction }
		
		path = {
			leads_to_tech = nrm_fib_power_projection
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_fib_sealane_defence
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1935
		
		dependencies = {
			nrm_fleet_formation = 1
			nrm_independent_cruiser_operation = 1
			nrm_independent_destroyer_operation = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fleet_in_being }
			is_tech_ai_valid = yes
			
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE y = @VERT_6h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0
				
				ai_fleet_in_being_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_fib_power_projection = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_fib_sealane_defence }
		} 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 6
			surface_detection = 0.05
		}
		category_all_cruiser = {
			max_organisation = 6
			surface_detection = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 4.2
			surface_detection = 0.035
		}
		category_all_cruiser_carrier = {
			max_organisation = 4.2
			surface_detection = 0.035
		}
		category_all_cruiser_submarine = {
			max_organisation = 1.2
			surface_detection = 0.01
		}
		
		navy_capital_ship_attack_factor = 0.03
		navy_screen_attack_factor = 0.02
		naval_hit_chance = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.02
		positioning = 0.01
		shore_bombardment_bonus = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_fib_sealane_defence }
		
		path = {
			leads_to_tech = nrm_fib_forward_basing
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1937
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_power_projection }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_L1 y = @VERT_7h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0
				
				ai_nrm_fib_power_projection_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_fib_sealane_defence = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_fib_power_projection }
		} 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 1
		}
		category_all_cruiser = {
			max_organisation = 4
			surface_detection = 0.05
			sub_detection = 0.05
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 0.7
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.8
			surface_detection = 0.035
			sub_detection = 0.035
			#default_morale = 0.007
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			surface_detection = 0.01
			sub_detection = 0.01
			#default_morale = 0.002
		}
		category_all_destroyer = {
			max_organisation = 4
			surface_detection = 0.05
			sub_detection = 0.05
			sub_attack = 0.05
			#default_morale = 0.01
		}
		category_all_escort = {
			sub_detection = 0.05
			sub_attack = 0.05
		}
		
		naval_hit_chance = 0.01
		screening_efficiency = 0.01
		convoy_escort_efficiency = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_fib_power_projection }
		
		path = {
			leads_to_tech = nrm_fib_patrol_operation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1937
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_sealane_defence }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_R1 y = @VERT_7h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0
				
				ai_nrm_fib_sealane_defence_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_fib_forward_basing = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			max_organisation = 2
			naval_range = 0.06
			#default_morale = 0.01
		}
		
		spotting_chance = 0.01
		naval_coordination = 0.05
		screening_efficiency = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_fib_fast_carrier_tf
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1939
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_forward_basing }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_L1 y = @VERT_8h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_fib_patrol_operation = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 4
			surface_detection = 0.05
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.8
			surface_detection = 0.035
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.8
			surface_detection = 0.01
		}
		category_all_destroyer = {
			max_organisation = 2
			surface_detection = 0.05
		}
		
		night_spotting_chance = 0.05
		naval_night_attack = 0.02
		navy_screen_attack_factor = 0.02
		navy_screen_defence_factor = 0.01
		naval_hit_chance = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		positioning = 0.01
		spotting_chance = 0.02
		screening_efficiency = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_fib_floating_fortress
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1939
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_patrol_operation }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_R1 y = @VERT_8h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_fib_fast_carrier_tf = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 3
			anti_air_attack = 0.05
			#default_morale = 0.01
			surface_detection = 0.1
			surface_visibility = -0.01
		}
		category_all_battleship = {
			max_organisation = 2
			anti_air_attack = 0.05
		}
		category_all_cruiser = {
			max_organisation = 2
			anti_air_attack = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 2.3
			anti_air_attack = 0.05
			#default_morale = 0.003
			surface_detection = 0.03
			surface_visibility = -0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.3
			anti_air_attack = 0.05
			#default_morale = 0.003
			surface_detection = 0.03
			surface_visibility = -0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 0.6
			anti_air_attack = 0.01
			#default_morale = 0.002
			surface_detection = 0.02
			surface_visibility = -0.002
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
			anti_air_attack = 0.01
		}
		category_all_destroyer = {
			max_organisation = 3
			anti_air_attack = 0.05
		}
		
		navy_capital_ship_attack_factor = 0.01
		sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#port_strike = 0.05
		positioning = 0.01
		screening_efficiency = 0.01
		navy_anti_air_attack_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_fib_defensive_formation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1941
		
		dependencies = {
			nrm_carrier_development = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_carrier
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_fast_carrier_tf }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_L1 y = @VERT_9h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_carrier = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_fib_floating_fortress = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 10
			#default_morale = 0.01
		}
		category_all_cruiser = {
			max_organisation = 3
		}
		category_all_battle_carrier = {
			max_organisation = 7
			#default_morale = 0.007
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.04
		naval_hit_chance = 0.02
		positioning = 0.01
		spotting_chance = 0.02
		screening_efficiency = 0.05
		navy_anti_air_attack_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_fib_defensive_formation
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1941
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_floating_fortress }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_R1 y = @VERT_9h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_fib_defensive_formation = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			#default_morale = 0.01
			surface_detection = 0.05
		}
		category_all_cruiser = {
			max_organisation = 5
			surface_detection = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			#default_morale = 0.007
			surface_detection = 0.035
		}
		category_all_cruiser_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
		}
		category_all_cruiser_submarine = {
			max_organisation = 1
			surface_detection = 0.01
		}
		category_all_destroyer = {
			max_organisation = 2
			surface_detection = 0.05
			sub_detection = 0.05
		}
		
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.02
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.02
		naval_hit_chance = 0.02
		positioning = 0.01
		screening_efficiency = 0.05
		convoy_escort_efficiency = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_fib_flexible_operations
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_fib_modern_battlefleet
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1943
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_defensive_formation }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE y = @VERT_10h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_fib_flexible_operations = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			naval_range = 0.04
		}
		category_all_cruiser = {
			max_organisation = 3
			surface_detection = 0.05
			surface_visibility = -0.01
			sub_detection = 0.05
			sub_attack = 0.05
			#default_morale = 0.01
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
			surface_detection = 0.035
			surface_visibility = -0.007
			sub_detection = 0.035
			sub_attack = 0.035
			#default_morale = 0.007
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
			surface_detection = 0.01
			surface_visibility = -0.002
			sub_detection = 0.01
			sub_attack = 0.01
			#default_morale = 0.002
		}
		category_all_destroyer = {
			max_organisation = 3
			surface_detection = 0.05
			surface_visibility = -0.01
			sub_detection = 0.05
			sub_attack = 0.05
			#default_morale = 0.01
		}
		category_all_escort = {
			sub_detection = 0.05
			sub_attack = 0.05
		}
		
		night_spotting_chance = 0.05
		naval_night_attack = 0.03
		navy_screen_attack_factor = 0.02
		navy_screen_defence_factor = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		screening_efficiency = 0.02
		convoy_escort_efficiency = 0.05
		spotting_chance = 0.01
		naval_coordination = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1945
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_cruiser
			naval_doctrine_destroyer
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_flexible_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_destroyer_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_L1 y = @VERT_11h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_destroyer = 2.0		
		}

	}
	nrm_fib_modern_battlefleet = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			surface_detection = 0.05
			surface_visibility = -0.01
			#default_morale = 0.01
		}
		category_all_cruiser = {
			max_organisation = 2
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
			surface_visibility = -0.007
			#default_morale = 0.007
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.4
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.02
		naval_hit_chance = 0.02
		screening_efficiency = 0.02
		positioning = 0.01
		navy_anti_air_attack_factor = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5

		#doctrine = yes	
		research_cost = 2.0
		start_year = 1945
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_in_being
			naval_doctrine_capital
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fib_modern_battlefleet }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_in_being_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FIB_TREE_R1 y = @VERT_11h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @FLEET_IN_BEING_PRIORITY }
				ai_fleet_in_being_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_in_being = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	
	#Trade Interdiction Branch
	nrm_trade_interdiction = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_decisive_battle }
			NOT = { has_tech = nrm_fleet_in_being }
		} 
		
		max_navy_experience = 50
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 2
			surface_detection = 0.05
			surface_visibility = -0.01
			convoy_raiding_coordination = 0.05
		}
		category_all_subs = {
			max_organisation = 2
			torpedo_attack = 0.05
			surface_detection = 0.02
			sub_visibility = -0.01
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.4
			surface_detection = 0.035
			surface_visibility = -0.007
			convoy_raiding_coordination = 0.035
		}
		category_all_submarine_carrier = {
			max_organisation = 1.6
			torpedo_attack = 0.04
			surface_detection = 0.016
			sub_visibility = -0.008
		}
		category_all_cruiser_submarine = {
			max_organisation = 2
			surface_detection = 0.026
			surface_visibility = -0.002
			convoy_raiding_coordination = 0.01
			torpedo_attack = 0.04
			sub_visibility = -0.008
		}
		
		convoy_raiding_efficiency_factor = 0.1
		naval_hit_chance = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		naval_retreat_chance = 0.03
		naval_retreat_speed = 0.03
		naval_enemy_fleet_size_ratio_penalty_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		xor = { nrm_fleet_in_being nrm_decisive_battle }
		
		path = {
			leads_to_tech = nrm_ti_raider_patrols
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1935
		
		dependencies = {
			nrm_scouting_force = 1
			nrm_independent_cruiser_operation = 1
			nrm_destroyer_torpedo_tactics = 1
			nrm_submarine_torpedo_tactics = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_trade_interdiction
			naval_doctrine_cruiser
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_trade_interdiction }
			is_tech_ai_valid = yes
			
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_trade_interdiction_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @TI_TREE y = @VERT_6h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @TRADE_INTERDICTION_PRIORITY }
				ai_trade_interdiction_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_trade_interdiction_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_trade_interdiction = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_ti_raider_patrols = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_cruiser = {
			max_organisation = 3
			surface_detection = 0.05
			surface_visibility = -0.01
			convoy_raiding_coordination = 0.1
			torpedo_attack = 0.05
			#default_morale = 0.01
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.1
			surface_detection = 0.035
			surface_visibility = -0.007
			convoy_raiding_coordination = 0.07
			torpedo_attack = 0.035
			#default_morale = 0.007
		}
		category_all_cruiser_submarine = {
			max_organisation = 0.6
			surface_detection = 0.01
			surface_visibility = -0.002
			convoy_raiding_coordination = 0.02
			torpedo_attack = 0.01
			#default_morale = 0.002
		}
		
		navy_screen_attack_factor = 0.02
		navy_screen_defence_factor = 0.02
		naval_torpedo_screen_penetration_factor = 0.01
		naval_retreat_chance = 0.02
		positioning = 0.01
		screening_efficiency = 0.01
		naval_enemy_fleet_size_ratio_penalty_factor = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_ti_capital_raiders
			research_cost_coeff = 1
		}
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1937
		
		categories = {
			naval_doctrine
			naval_doctrine_trade_interdiction
			naval_doctrine_cruiser
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_ti_raider_patrols }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_trade_interdiction_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @TI_TREE y = @VERT_7h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @TRADE_INTERDICTION_PRIORITY }
				ai_trade_interdiction_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_trade_interdiction = 2.0
			naval_doctrine_cruiser = 2.0		
		}

	}
	nrm_ti_capital_raiders = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			surface_detection = 0.05
			surface_visibility = -0.01
			convoy_raiding_coordination = 0.15
			torpedo_attack = 0.05
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
			surface_visibility = -0.007
			convoy_raiding_coordination = 0.105
			torpedo_attack = 0.035
			#default_morale = 0.007
		}
		
		navy_capital_ship_attack_factor = 0.02
		navy_capital_ship_defence_factor = 0.02
		naval_hit_chance = 0.02
		positioning = 0.01
		screening_efficiency = 0.01
		naval_enemy_fleet_size_ratio_penalty_factor = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_ti_extended_range
			research_cost_coeff = 1
		}
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1939
		
		categories = {
			naval_doctrine
			naval_doctrine_trade_interdiction
			naval_doctrine_capital
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_ti_capital_raiders }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_trade_interdiction_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @TI_TREE y = @VERT_8h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @TRADE_INTERDICTION_PRIORITY }
				ai_trade_interdiction_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_trade_interdiction = 2.0
			naval_doctrine_capital = 2.0		
		}

	}
	nrm_ti_extended_range = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			max_organisation = 2
			naval_range = 0.1
			#default_morale = 0.01
		}
		category_all_subs = {
			naval_range = 0.05
			#default_morale = 0.01
		}
		category_all_submarine_carrier = {
			naval_range = 0.04
			#default_morale = 0.008
		}
		category_all_cruiser_submarine = {
			naval_range = 0.04
			#default_morale = 0.008
		}
		
		convoy_raiding_efficiency_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_ti_combined_raiding
			research_cost_coeff = 1
		}
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1941
		
		categories = {
			naval_doctrine
			naval_doctrine_trade_interdiction
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_ti_extended_range }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_trade_interdiction_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @TI_TREE y = @VERT_9h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @TRADE_INTERDICTION_PRIORITY }
				ai_trade_interdiction_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_trade_interdiction = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_ti_combined_raiding = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_battleship = {
			max_organisation = 5
			surface_detection = 0.05
			convoy_raiding_coordination = 0.15
			surface_visibility = -0.01
		}
		category_all_cruiser = {
			max_organisation = 5
			surface_detection = 0.05
			convoy_raiding_coordination = 0.15
		}
		category_all_subs = {
			max_organisation = 3
			torpedo_attack = 0.05
			surface_detection = 0.05
			sub_visibility = -0.01
			convoy_raiding_coordination = 0.1
		}
		category_all_battle_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
			convoy_raiding_coordination = 0.105
			surface_visibility = -0.007
		}
		category_all_cruiser_carrier = {
			max_organisation = 3.5
			surface_detection = 0.035
			convoy_raiding_coordination = 0.105
		}
		category_all_submarine_carrier = {
			max_organisation = 2.4
			torpedo_attack = 0.04
			surface_detection = 0.04
			sub_visibility = -0.008
			convoy_raiding_coordination = 0.08
		}
		category_all_cruiser_submarine = {
			max_organisation = 3.4
			surface_detection = 0.05
			convoy_raiding_coordination = 0.11
			torpedo_attack = 0.04
			sub_visibility = -0.008
		}
		
		convoy_raiding_efficiency_factor = 0.05
		night_spotting_chance = 0.05
		naval_night_attack = 0.05
		navy_screen_attack_factor = 0.01
		navy_screen_defence_factor = 0.01
		navy_capital_ship_attack_factor = 0.01
		navy_capital_ship_defence_factor = 0.01
		naval_torpedo_screen_penetration_factor = 0.01
		naval_retreat_speed = 0.02
		positioning = 0.01
		screening_efficiency = 0.02
		naval_enemy_fleet_size_ratio_penalty_factor = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_ti_carrier_raiding
			research_cost_coeff = 1
		}
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1943
		
		dependencies = {
			nrm_fleet_coordination = 1
			nrm_submarine_tactics_improved = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_trade_interdiction
			naval_doctrine_capital
			naval_doctrine_cruiser
			naval_doctrine_submarine
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_ti_combined_raiding }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_trade_interdiction_tt
			custom_effect_tooltip = naval_doctrine_capital_tt
			custom_effect_tooltip = naval_doctrine_cruiser_tt
			custom_effect_tooltip = naval_doctrine_submarine_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @TI_TREE y = @VERT_10h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @TRADE_INTERDICTION_PRIORITY }
				ai_trade_interdiction_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_trade_interdiction = 2.0
			naval_doctrine_capital = 2.0
			naval_doctrine_cruiser = 2.0
			naval_doctrine_submarine = 2.0		
		}

	}
	nrm_ti_carrier_raiding = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			surface_detection = 0.1
			convoy_raiding_coordination = 0.3
			surface_visibility = -0.02
		}
		category_all_battle_carrier = {
			surface_detection = 0.03
			convoy_raiding_coordination = 0.09
			surface_visibility = -0.006
		}
		category_all_cruiser_carrier = {
			surface_detection = 0.03
			convoy_raiding_coordination = 0.09
			surface_visibility = -0.006
		}
		category_all_submarine_carrier = {
			surface_detection = 0.02
			convoy_raiding_coordination = 0.06
			surface_visibility = -0.004
		}
		
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#port_strike = 0.05
		screening_efficiency = 0.01
		navy_anti_air_attack_factor = 0.02
		convoy_raiding_efficiency_factor = 0.05
		naval_retreat_speed = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes
		research_cost = 2.0
		start_year = 1945
		
		dependencies = {
			nrm_carrier_development = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_trade_interdiction
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_ti_carrier_raiding }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_trade_interdiction_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @TI_TREE y = @VERT_11h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @TRADE_INTERDICTION_PRIORITY }
				ai_trade_interdiction_tech = yes 
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_trade_interdiction = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	
	#Mine Warfare Branch
	nrm_mine_warfare = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		mines_planting_by_fleets_factor = 0.2
		mines_sweeping_by_fleets_factor = 0.2
		naval_mines_effect_reduction = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 20
		xp_research_bonus = 1.0
		
		path = {
			leads_to_tech = nrm_mine_warfare_2
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1905
		
		categories = {
			naval_doctrine
			naval_doctrine_ww1
			naval_doctrine_mine_warfare
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_mine_warfare }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_ww1_tt
			custom_effect_tooltip = naval_doctrine_mine_warfare_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @MINE_TREE y = @VERT_2 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @MINE_PRIORITY
				
				ai_mine_warfare_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_ww1 = 1.0
			naval_doctrine_mine_warfare = 1.0		
		}

	}
	nrm_mine_warfare_2 = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		mines_planting_by_fleets_factor = 0.3
		mines_sweeping_by_fleets_factor = 0.3
		naval_mines_effect_reduction = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_mine_warfare
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_mine_warfare_2 }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_mine_warfare_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @MINE_TREE y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @MINE_PRIORITY
				
				ai_mine_warfare_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_mine_warfare = 2.0		
		}

	}
	
	#Fleet Train Branch
	nrm_fleet_train = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			naval_range = 0.05
		}
		
		repair_speed_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_replenishment_sea
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1935
		
		dependencies = {
			nrm_fleet_coordination = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_train
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_fleet_train }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_train_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FLEETTRAIN_TREE y = @VERT_6h }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @FLEET_LOGISTICS_PRIORITY
				
				ai_fleet_logistics_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_fleet_train = 2.0		
		}

	}
	nrm_replenishment_sea = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			naval_range = 0.05
			#default_morale = 0.01
		}
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_replenishment_underway
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1940
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_train
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_replenishment_sea }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_train_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FLEETTRAIN_TREE y = @VERT_9 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @FLEET_LOGISTICS_PRIORITY
				
				ai_fleet_logistics_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_fleet_train = 2.5		
		}

	}
	nrm_replenishment_underway = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_surface_ship = {
			naval_range = 0.05
			#default_morale = 0.02
		}
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1944
		
		categories = {
			naval_doctrine
			naval_doctrine_fleet_train
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_replenishment_underway }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_fleet_train_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @FLEETTRAIN_TREE y = @VERT_11 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = @FLEET_LOGISTICS_PRIORITY
				
				ai_fleet_logistics_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_fleet_train = 2.5		
		}

	}
	
	#Carrier Branch
	nrm_naval_aviation = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_experiments
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1915
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_naval_aviation }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
			custom_effect_tooltip = unlock_research_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_R2 y = @VERT_4 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_carrier = 1.0		
		}

	}
	nrm_carrier_experiments = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 2
			carrier_size = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 0.6
			carrier_size = 0.015
		}
		category_all_cruiser_carrier = {
			max_organisation = 0.6
			carrier_size = 0.015
		}
		category_all_submarine_carrier = {
			max_organisation = 0.4
			carrier_size = 0.01
		}
		
		sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 75
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_independent
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_carrier_integrated
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.5
		start_year = 1915
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_experiments }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE y = @VERT_4 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.5
			naval_doctrine_carrier = 1.5		
		}

	}
	nrm_carrier_independent = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_integrated }
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			surface_detection = 0.05
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			surface_detection = 0.015
			#default_morale = 0.003
		}
		category_all_cruiser_carrier = {
			surface_detection = 0.015
			#default_morale = 0.003
		}
		category_all_submarine_carrier = {
			surface_detection = 0.01
			#default_morale = 0.002
		}
		
		sortie_efficiency = 0.06
		#port_strike = 0.1
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_integrated }
		
		path = {
			leads_to_tech = nrm_carrier_development
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_independent }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L1 y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_nrm_carrier_independent_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	nrm_carrier_integrated = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_independent }
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 5
		}
		category_all_battle_carrier = {
			max_organisation = 1.5
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.5
		}
		category_all_submarine_carrier = {
			max_organisation = 1
		}
		
		sortie_efficiency = 0.03
		fighter_sortie_efficiency = 0.02
		navy_carrier_air_agility_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_independent }
		
		path = {
			leads_to_tech = nrm_carrier_development
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 1.0
		start_year = 1920
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_integrated }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_R1 y = @VERT_5 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0 
				
				ai_nrm_carrier_integrated_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 1.0
			naval_doctrine_carrier = 1.0		
		}

	}
	nrm_carrier_development = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 3
			#default_morale = 0.01
			carrier_size = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 0.9
			#default_morale = 0.003
			carrier_size = 0.015
		}
		category_all_cruiser_carrier = {
			max_organisation = 0.9
			#default_morale = 0.003
			carrier_size = 0.015
		}
		category_all_submarine_carrier = {
			max_organisation = 0.6
			#default_morale = 0.002
			carrier_size = 0.01
		}
		
		sortie_efficiency = 0.04
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_deck_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1930
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_development }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE y = @VERT_6 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	nrm_carrier_offensive = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_scouting }
			NOT = { has_tech = nrm_carrier_defensive }
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 5
			surface_detection = 0.05
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 1.5
			surface_detection = 0.015
			#default_morale = 0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.5
			surface_detection = 0.015
			#default_morale = 0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 1
			surface_detection = 0.01
			#default_morale = 0.002
		}
		
		sortie_efficiency = 0.05
		#port_strike = 0.2
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.1
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_scouting nrm_carrier_defensive }
		
		path = {
			leads_to_tech = nrm_carrier_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1936
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		dependencies = {
			nrm_carrier_independent = 1
			nrm_carrier_development = 1
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_offensive }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L2 y = @VERT_7 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}
		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}
	}
	nrm_carrier_scouting = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_offensive }
			NOT = { has_tech = nrm_carrier_defensive }
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 5
			surface_detection = 0.1
			sub_detection = 0.05
			#default_morale = 0.01
			surface_visibility = -0.02
		}
		category_all_battle_carrier = {
			max_organisation = 1.5
			surface_detection = 0.03
			sub_detection = 0.015
			#default_morale = 0.003
			surface_visibility = -0.006
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.5
			surface_detection = 0.03
			sub_detection = 0.015
			#default_morale = 0.003
			surface_visibility = -0.006
		}
		category_all_submarine_carrier = {
			max_organisation = 1
			surface_detection = 0.02
			sub_detection = 0.01
			#default_morale = 0.002
			surface_visibility = -0.004
		}
		
		sortie_efficiency = 0.05
		#port_strike = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		positioning = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_offensive nrm_carrier_defensive }
		
		path = {
			leads_to_tech = nrm_carrier_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1936
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		dependencies = {
			nrm_carrier_development = 1
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_scouting }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE y = @VERT_7 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}
		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}
	}
	nrm_carrier_defensive = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_offensive }
			NOT = { has_tech = nrm_carrier_scouting }
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 5
			surface_detection = 0.05
			sub_detection = 0.10
			#default_morale = 0.02
		}
		category_all_battle_carrier = {
			max_organisation = 1.5
			surface_detection = 0.015
			sub_detection = 0.03
			#default_morale = 0.006
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.5
			surface_detection = 0.015
			sub_detection = 0.03
			#default_morale = 0.006
		}
		category_all_submarine_carrier = {
			max_organisation = 1
			surface_detection = 0.01
			sub_detection = 0.02
			#default_morale = 0.004
		}
		
		sortie_efficiency = 0.03
		fighter_sortie_efficiency = 0.03
		navy_carrier_air_agility_factor = 0.1
		navy_carrier_air_targetting_factor = 0.05
		convoy_escort_efficiency = 0.04
		navy_anti_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_offensive nrm_carrier_scouting }
		
		path = {
			leads_to_tech = nrm_carrier_operations
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1936
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		dependencies = {
			nrm_carrier_integrated = 1
			nrm_carrier_development = 1
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_defensive }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_R2 y = @VERT_7 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}
	}
	nrm_carrier_operations = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			has_navy_size = { type = carrier size > 0 }
		} 
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 5
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 1.5
			#default_morale = 0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.5
			#default_morale = 0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 1
			#default_morale = 0.002
		}
		
		sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.025
		navy_carrier_air_attack_factor = 0.025
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_taskforce
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_carrier_support
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1938
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_operations }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE y = @VERT_8 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	nrm_carrier_taskforce = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_support }
			has_navy_size = { type = carrier size > 0 }
		}
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 10
			surface_detection = 0.05
			sub_detection = 0.05
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 3
			surface_detection = 0.015
			sub_detection = 0.015
			#default_morale = 0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 3
			surface_detection = 0.015
			sub_detection = 0.015
			#default_morale = 0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 2
			surface_detection = 0.01
			sub_detection = 0.01
			#default_morale = 0.002
		}
		
		sortie_efficiency = 0.1
		#port_strike = 0.2
		navy_carrier_air_agility_factor = 0.025
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		navy_anti_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_support }
		
		path = {
			leads_to_tech = nrm_carrier_strike
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_carrier_defence
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1940
		
		dependencies = {
			nrm_carrier_independent = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_taskforce }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L1 y = @VERT_9 }
		}
		
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0
				
				ai_nrm_carrier_taskforce_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	nrm_carrier_support = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			NOT = { has_tech = nrm_carrier_taskforce }
			has_navy_size = { type = carrier size > 0 }
		}
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 15
			surface_detection = 0.05
			sub_detection = 0.1
			#default_morale = 0.01
		}
		category_all_battle_carrier = {
			max_organisation = 4.5
			surface_detection = 0.015
			sub_detection = 0.03
			#default_morale = 0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 4.5
			surface_detection = 0.015
			sub_detection = 0.03
			#default_morale = 0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 3
			surface_detection = 0.01
			sub_detection = 0.02
			#default_morale = 0.002
		}
		
		sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.025
		navy_carrier_air_attack_factor = 0.025
		navy_anti_air_attack_factor = 0.05
		convoy_escort_efficiency = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		xor = { nrm_carrier_taskforce }
		
		path = {
			leads_to_tech = nrm_carrier_strike
			research_cost_coeff = 1
		}
		path = {
			leads_to_tech = nrm_carrier_defence
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1940
		
		dependencies = {
			nrm_carrier_integrated = 1
		}
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_support }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_R1 y = @VERT_9 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
			modifier = {
				factor = 0
				
				ai_nrm_carrier_support_pick = no 
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	nrm_carrier_strike = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			has_navy_size = { type = carrier size > 0 }
		}
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 2
			surface_detection = 0.05
		}
		category_all_battle_carrier = {
			max_organisation = 0.6
			surface_detection = 0.015
		}
		category_all_cruiser_carrier = {
			max_organisation = 0.6
			surface_detection = 0.015
		}
		category_all_submarine_carrier = {
			max_organisation = 0.4
			surface_detection = 0.01
		}
		
		sortie_efficiency = 0.05
		#port_strike = 0.1
		navy_carrier_air_targetting_factor = 0.1
		navy_carrier_air_attack_factor = 0.1
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_operations_advanced
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_strike }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L1 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_carrier = 2.5		
		}

	}
	nrm_carrier_defence = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			has_navy_size = { type = carrier size > 0 }
		}
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 8
			#default_morale = 0.01
			sub_detection = 0.05
			surface_visibility = -0.02
		}
		category_all_battle_carrier = {
			max_organisation = 2.4
			#default_morale = 0.003
			sub_detection = 0.015
			surface_visibility = -0.006
		}
		category_all_cruiser_carrier = {
			max_organisation = 2.4
			#default_morale = 0.003
			sub_detection = 0.015
			surface_visibility = -0.006
		}
		category_all_submarine_carrier = {
			max_organisation = 1.6
			#default_morale = 0.002
			sub_detection = 0.01
			surface_visibility = -0.004
		}
		
		fighter_sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.1
		navy_anti_air_attack_factor = 0.05
		convoy_escort_efficiency = 0.03
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_operations_advanced
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_defence }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}

		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_R1 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}	

		ai_research_weights = {			
			naval_doctrine = 2.5
			naval_doctrine_carrier = 2.5		
		}

	}
	nrm_carrier_operations_advanced = {
		allow = {
			has_country_flag = UNLOCK:naval_doctrine_folder
			has_navy_size = { type = carrier size > 0 }
		}
		
		# EFFECT #############
		category_all_carrier = {
			max_organisation = 5
			#default_morale = 0.01
			surface_detection = 0.05
			sub_detection = 0.05
			surface_visibility = -0.01
		}
		category_all_battle_carrier = {
			max_organisation = 1.5
			#default_morale = 0.003
			surface_detection = 0.015
			sub_detection = 0.015
			surface_visibility = -0.003
		}
		category_all_cruiser_carrier = {
			max_organisation = 1.5
			#default_morale = 0.003
			surface_detection = 0.015
			sub_detection = 0.015
			surface_visibility = -0.003
		}
		category_all_submarine_carrier = {
			max_organisation = 1
			#default_morale = 0.002
			surface_detection = 0.01
			sub_detection = 0.01
			surface_visibility = -0.002
		}
		
		sortie_efficiency = 0.05
		fighter_sortie_efficiency = 0.05
		navy_carrier_air_agility_factor = 0.05
		navy_carrier_air_targetting_factor = 0.05
		navy_carrier_air_attack_factor = 0.05
		#####
		xp_research_type = navy
		xp_boost_cost = 100
		xp_research_bonus = 0.5
		
		#doctrine = yes	
		research_cost = 2.5
		start_year = 1944
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		dependencies = {
			nrm_carrier_defence = 1
			nrm_carrier_strike = 1
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_operations_advanced }
			is_tech_ai_valid = yes
			if = {
				limit = {
					NOT = {
						has_navy_size = { type = carrier size > 0 }
					}
				}
				custom_effect_tooltip = research_require_carrier_tt
			}
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE y = @VERT_11 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}
	}
	
	#Carrier Handling/Deck Branch
	nrm_carrier_deck_operations = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			carrier_size = 0.05
		}
		category_all_battle_carrier = {
			carrier_size = 0.015
		}
		category_all_cruiser_carrier = {
			carrier_size = 0.015
		}
		category_all_submarine_carrier = {
			carrier_size = 0.01
		}
		
		sortie_efficiency = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_deck_park
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 2.0
		start_year = 1930
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_deck_operations }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L3 y = @VERT_6 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 2.0
			naval_doctrine_carrier = 2.0		
		}

	}
	nrm_carrier_deck_park = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			carrier_size = 0.1
		}
		category_all_battle_carrier = {
			carrier_size = 0.03
		}
		category_all_cruiser_carrier = {
			carrier_size = 0.03
		}
		category_all_submarine_carrier = {
			carrier_size = 0.02
		}
		
		sortie_efficiency = 0.01
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_deck_advanced
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 3.0
		start_year = 1942
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_deck_park }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L3 y = @VERT_10 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 3.0
			naval_doctrine_carrier = 3.0		
		}

	}
	nrm_carrier_deck_advanced = {
		allow = { has_country_flag = UNLOCK:naval_doctrine_folder } 
		
		# EFFECT #############
		category_all_carrier = {
			carrier_size = 0.05
		}
		category_all_battle_carrier = {
			carrier_size = 0.015
		}
		category_all_cruiser_carrier = {
			carrier_size = 0.015
		}
		category_all_submarine_carrier = {
			carrier_size = 0.01
		}
		
		sortie_efficiency = 0.02
		#####
		xp_research_type = navy
		xp_boost_cost = 50
		xp_research_bonus = 0.5
		
		path = {
			leads_to_tech = nrm_carrier_deck_advanced
			research_cost_coeff = 1
		}
		
		#doctrine = yes	
		research_cost = 3.0
		start_year = 1944
		
		categories = {
			naval_doctrine
			naval_doctrine_carrier
		}
		
		on_research_complete = {
			set_temp_variable = { tech = token:nrm_carrier_deck_park }
			is_tech_ai_valid = yes
			custom_effect_tooltip = tech_category_tt
			custom_effect_tooltip = naval_doctrine_tt
			custom_effect_tooltip = naval_doctrine_carrier_tt
		}
		
		folder = {
			name = naval_doctrine_folder
			position = { x = @CV_TREE_L3 y = @VERT_11 }
		}
		
		ai_will_do = {
			base = 0
			modifier = {
				add = ai_base
				
				set_temp_variable = { base = @CARRIER_PRIORITY }
				ai_carrier_doctrine_tech = yes
			}
			modifier = {
				factor = ai_naval_doctrine_tech_need
			}
		}

		ai_research_weights = {			
			naval_doctrine = 3.0
			naval_doctrine_carrier = 3.0		
		}

	}
}
### EOF ###